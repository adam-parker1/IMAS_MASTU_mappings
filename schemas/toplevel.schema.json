{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "/schemas/toplevel",
    "description": "JSON Schema for v1.0 of default top-level mappings",
    "type": "object",
    "properties": {
        "patternProperties": {
            "^([a-z]+[^0-9])$": {
                "type": "object",
                "required": [ "MAP_TYPE" ],
                "properties": {
                    "MAP_TYPE": {
                        "type": "string",
                        "enum": ["VALUE", "MAP", "OFFSET", "SCALE", "EXPR", "DIMENSION"],
                        "default": "VALUE"
                    }
                },
                "oneOf": [
                    { "$ref": "#/$defs/VALUE" },
                    { "$ref": "#/$defs/MAP" },
                    { "$ref": "#/$defs/OFFSET" },
                    { "$ref": "#/$defs/SCALE" },
                    { "$ref": "#/$defs/EXPR" },
                    { "$ref": "#/$defs/DIMENSION" }
                ]
            }
        },
        "additionalProperties": true
    },
    "$defs": {
        "DIMENSION": {
            "properties": {
                "MAP_TYPE": { "const": "DIMENSION" },
                "DIM_PROBE": { "type": "string" }
            },
            "required": [
                        "MAP_TYPE",
                        "DIM_PROBE"
            ],
            "additionalProperties": false
        },
        "VALUE": {
            "properties": {
                "MAP_TYPE": { "const": "VALUE" },
                "VALUE": { "type": ["number", "string", "array", "object"] }
            },
            "required": [
                        "MAP_TYPE",
                        "VALUE"
            ],
            "additionalProperties": false
        },
        "MAP": {
            "properties": {
                "MAP_TYPE": { "const": "MAP" },
                "KEY": { "type": "string" },
                "VAR": { "type": "string" },
                "PLUGIN": { "enum": ["UDA", "GEOMETRY"] }
            },
            "required": [
                        "MAP_TYPE",
                        "KEY",
                        "PLUGIN"
            ],
            "additionalProperties": false
        },
        "OFFSET": {
            "properties": {
                "MAP_TYPE": { "const": "OFFSET" },
                "KEY": { "type": "string" },
                "VAR": { "type": "string" },
                "PLUGIN": { "enum": ["UDA", "GEOMETRY"] },
                "OFFSET": { "type": "number" }
            },
            "required": [
                            "MAP_TYPE",
                            "KEY",
                            "PLUGIN",
                            "OFFSET"
            ],
            "additionalProperties": false
        },
        "SCALE": {
            "properties": {
                "MAP_TYPE": { "const": "SCALE" },
                "KEY": { "type": "string" },
                "VAR": { "type": "string" },
                "PLUGIN": { "enum": ["UDA", "GEOMETRY"] },
                "SCALAR": { "type": "number" }
            },
            "required": [
                            "MAP_TYPE",
                            "KEY",
                            "PLUGIN",
                            "SCALAR"
            ],
            "additionalProperties": false
        },
        "EXPR": {
            "properties": {
                "MAP_TYPE": { "const": "EXPR" },
                "PARAMETERS": {
                    "type": "object",
                    "patternProperties": { 
                        "^.*$": {
                            "type": "string" 
                        }
                    }

                },
                "EXPR": { "type": "string" }
            },
            "required": [
                            "MAP_TYPE",
                            "PARAMETERS",
                            "EXPR"
            ],
            "additionalProperties": false
        }
    }
}
